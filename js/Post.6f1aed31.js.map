{"version":3,"sources":["webpack:///./src/views/Post.vue","webpack:///./src/views/Post.vue?3223","webpack:///./src/views/Post.vue?ab76","webpack:///./src/views/Post.vue?37c1"],"names":["class","for","style","title","contentCard","description","previewUrl","userData","bgColor","invertedHex","isOwnProfile","type","name","editMode","id","field","value","postUid","href","userUid","src","photoURL","displayName","cardBgColor","isCardPreview","onDelete","components","ContentCard","EditableTextInput","usePatchMeta","props","String","setup","currentUser","uid","postRef","doc","userRef","Promise","all","get","postDoc","userDoc","exists","console","log","router","replace","postData","data","reactiveData","onSnapshot","previewVideo","previewImage","iFrameUrl","deleteContentCard","hostedFileName","render"],"mappings":"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","file":"js/Post.6f1aed31.js","sourcesContent":["<template>\n    <usePatchMeta :title=\"contentCard.title\" :description=\"contentCard.description\" :previewUrl=\"previewUrl\" />\n    <div class=\"container p-3\" v-bind:style=\"`background-color: ${userData.bgColor}; color: ${invertedHex};`\">\n\n        <div class=\"row align-items-center p-2\" v-if=\"isOwnProfile\">\n          <h4><i class=\"fa fa-pencil mr-1\"></i></h4>\n          <label for=\"editPostModeCheckbox\" class=\"el-switch\"><input type=\"checkbox\" name=\"switch\" v-model=\"editMode\" id=\"editPostModeCheckbox\">\n            <span class=\"el-switch-style\"></span>\n          </label>  \n        </div>\n\n        <div v-if=\"editMode || contentCard.title\" style=\"margin: 15px;\">\n            <h1><EditableTextInput :field=\"'title'\" :value=\"contentCard.title\" :editMode=\"editMode\" :postUid=\"postUid\" class=\"post-title hidden-sm center\" /></h1>\n        </div>\n\n        <hr v-bind:style=\"`background-color: ${invertedHex};`\" class=\"mb-5 mt-3\" />\n\n        <div class=\"row\">\n\n            <div class=\"col-sm-4\"> \n                <a v-show=\"!editMode\" class=\"row\" :href=\"`/#/u/${userUid}`\" v-bind:style=\"`color: ${invertedHex}; text-decoration: none;`\">\n                    <div class=\"col-3 post-profile-img\">\n                        <img :src=\"userData.photoURL\" v-bind:style=\"`border: solid 2px; ${invertedHex};`\" />\n                    </div>\n                    <div class=\"pl-1 col-9\">\n                        <h4>{{userData.displayName}}</h4>\n                    </div>\n                </a>\n                <div v-show=\"editMode\" class=\"row\" v-bind:style=\"`color: ${invertedHex};`\">\n                    <div class=\"col-3 post-profile-img\">\n                        <img :src=\"userData.photoURL\" v-bind:style=\"`border: solid 2px; ${invertedHex};`\" />\n                    </div>\n                    <div class=\"pl-1 col-9\">\n                        <h4>{{userData.displayName}}</h4>\n                    </div>\n                </div>\n\n                <div class=\"mt-4 text-justify\">\n                    <EditableTextInput :field=\"'description'\" :value=\"contentCard.description\" :editMode=\"editMode\" :postUid=\"postUid\" class=\"justify\" />\n                </div>\n            </div>  \n\n            <div class=\"col-sm-8\">\n                <ContentCard :cardBgColor=\"invertedHex\" :contentCard=\"contentCard\" :editMode=\"editMode\" :userUid=\"userUid\" :postUid=\"postUid\" :isCardPreview=\"false\" :onDelete=\"onDelete\" />\n            </div>\n\n        </div>\n    </div>\n</template>\n\n<script lang=\"ts\">\nimport { auth, profilesCollection, getTimelineCollection } from '@/firebase.config'\nimport router from '@/router'\nimport { reactive, toRefs, computed } from 'vue'\nimport ContentCard from '@/components/shared/ContentCard'\nimport EditableTextInput from '@/components/shared/EditableTextInput'\nimport { UserProfile } from '../types/UserProfile'\nimport { invertHex } from '@/utils/utils'\nimport deleteContentCard from '@/services/deleteContentCard'\nimport usePatchMeta from '@/components/shared/usePatchMeta'\n\nexport default {\n    components: {\n        ContentCard,\n        EditableTextInput,\n        usePatchMeta\n    },\n    props: {\n        userUid: String,\n        postUid: String,\n    },\n    async setup (props) {\n        const isOwnProfile = auth?.currentUser?.uid === props.userUid\n        \n        const postRef = getTimelineCollection(props.userUid).doc(props.postUid)\n        const userRef = profilesCollection.doc(props.userUid)\n\n        const [postDoc, userDoc] = await Promise.all([ postRef.get(), userRef.get() ])\n        if (!postDoc?.exists || !userDoc?.exists) {\n            console.log('Post or user not found, TODO 404')\n            router.replace('/404')\n            return\n        }\n        const postData: BaseContentCard = postDoc.data() as BaseContentCard\n        const userData: UserProfile = userDoc.data() as UserProfile\n        const reactiveData = reactive({\n            isOwnProfile,\n            contentCard: postData,\n            userData,\n            editMode: false\n        })\n        //Keep updating card template for own user profile\n        if (isOwnProfile) {\n            postRef.onSnapshot(async (postDoc) => {\n                const data = postDoc.data() as BaseContentCard\n                if (!data) return\n                reactiveData.contentCard = postDoc.data() as BaseContentCard\n            })\n        }\n\n        const previewUrl = userData?.previewVideo || userData?.previewImage || userData?.iFrameUrl\n\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        const invertedHex = computed(() => invertHex(userData.bgColor))\n       \n        const onDelete = async () => {\n            if (await deleteContentCard(props.postUid, reactiveData?.contentCard?.hostedFileName)) {\n                router.replace('/')\n            }\n        }\n\n        return {\n            ...toRefs(reactiveData),\n            invertedHex,\n            onDelete,\n            previewUrl\n        }\n    }\n}\n</script>\n\n<style lang=\"css\">\n/* Custom CSS here */\n\n.post-content {\n  min-height: 350px;\n  max-height: 600px;\n  object-fit: contain;\n}\n\n.post-profile-img img{\n  object-fit: cover;\n  border-radius: 50%;\n  height: 60px;\n  width: 60px;\n}\n</style>\n","\nimport { auth, profilesCollection, getTimelineCollection } from '@/firebase.config'\nimport router from '@/router'\nimport { reactive, toRefs, computed } from 'vue'\nimport ContentCard from '@/components/shared/ContentCard'\nimport EditableTextInput from '@/components/shared/EditableTextInput'\nimport { UserProfile } from '../types/UserProfile'\nimport { invertHex } from '@/utils/utils'\nimport deleteContentCard from '@/services/deleteContentCard'\nimport usePatchMeta from '@/components/shared/usePatchMeta'\n\nexport default {\n    components: {\n        ContentCard,\n        EditableTextInput,\n        usePatchMeta\n    },\n    props: {\n        userUid: String,\n        postUid: String,\n    },\n    async setup (props) {\n        const isOwnProfile = auth?.currentUser?.uid === props.userUid\n        \n        const postRef = getTimelineCollection(props.userUid).doc(props.postUid)\n        const userRef = profilesCollection.doc(props.userUid)\n\n        const [postDoc, userDoc] = await Promise.all([ postRef.get(), userRef.get() ])\n        if (!postDoc?.exists || !userDoc?.exists) {\n            console.log('Post or user not found, TODO 404')\n            router.replace('/404')\n            return\n        }\n        const postData: BaseContentCard = postDoc.data() as BaseContentCard\n        const userData: UserProfile = userDoc.data() as UserProfile\n        const reactiveData = reactive({\n            isOwnProfile,\n            contentCard: postData,\n            userData,\n            editMode: false\n        })\n        //Keep updating card template for own user profile\n        if (isOwnProfile) {\n            postRef.onSnapshot(async (postDoc) => {\n                const data = postDoc.data() as BaseContentCard\n                if (!data) return\n                reactiveData.contentCard = postDoc.data() as BaseContentCard\n            })\n        }\n\n        const previewUrl = userData?.previewVideo || userData?.previewImage || userData?.iFrameUrl\n\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        const invertedHex = computed(() => invertHex(userData.bgColor))\n       \n        const onDelete = async () => {\n            if (await deleteContentCard(props.postUid, reactiveData?.contentCard?.hostedFileName)) {\n                router.replace('/')\n            }\n        }\n\n        return {\n            ...toRefs(reactiveData),\n            invertedHex,\n            onDelete,\n            previewUrl\n        }\n    }\n}\n","import { render } from \"./Post.vue?vue&type=template&id=2cb3cd42\"\nimport script from \"./Post.vue?vue&type=script&lang=ts\"\nexport * from \"./Post.vue?vue&type=script&lang=ts\"\n\nimport \"./Post.vue?vue&type=style&index=0&lang=css\"\nscript.render = render\n\nexport default script","export { default } from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/dist/index.js??ref--0-1!./Post.vue?vue&type=style&index=0&lang=css\"; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/dist/index.js??ref--0-1!./Post.vue?vue&type=style&index=0&lang=css\""],"sourceRoot":""}